<!DOCTYPE html>
<html>
<head>
  <title>IQ & GK Quiz</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="quiz-box">
  <h2 id="level"></h2>
  <h3 id="question"></h3>

  <div class="options">
    <button onclick="check(0)" id="o0"></button>
    <button onclick="check(1)" id="o1"></button>
    <button onclick="check(2)" id="o2"></button>
    <button onclick="check(3)" id="o3"></button>
  </div>

  <p id="feedback"></p>
  <p id="progress"></p>
</div>

<script>
const TOTAL_LEVELS = 50;
const Q_PER_LEVEL = 10;

let level = 1;
let qIndex = 0;
let levelQuestions = [];

/* ðŸ§  GK + IQ DATA (USED TO BUILD DIFFERENT QUESTIONS) */
const gkData = [
  ["Capital of Pakistan","Islamabad"],
  ["Largest planet","Jupiter"],
  ["Fastest land animal","Cheetah"],
  ["National animal of Pakistan","Markhor"],
  ["Largest ocean","Pacific"],
  ["Opposite of Day","Night"],
  ["Gas humans breathe","Oxygen"],
  ["7 days make","Week"],
  ["Red planet","Mars"],
  ["Founder of Pakistan","Quaid-e-Azam"],
  ["Smallest continent","Australia"],
  ["Water freezes at","0Â°C"],
  ["Largest desert","Sahara"],
  ["National flower of Pakistan","Jasmine"],
  ["Sun is a","Star"]
];

/* ðŸ”¥ LEVEL-WISE UNIQUE QUESTION GENERATOR */
function generateLevelQuestions(lv){
  let questions = [];
  for(let i=0;i<Q_PER_LEVEL;i++){
    let dataIndex = (lv * i + i + lv) % gkData.length;
    let correct = gkData[dataIndex][1];

    let options = ["London","Asia","Tiger","Saturn","Lion","Asia","Carbon"];
    options[Math.floor(Math.random()*options.length)] = correct;
    options = options.slice(0,4);

    if(!options.includes(correct)){
      options[0] = correct;
    }

    options.sort(()=>Math.random()-0.5);

    questions.push({
      q: gkData[dataIndex][0] + " ?",
      o: options,
      a: options.indexOf(correct)
    });
  }
  return questions;
}

function loadLevel(){
  levelQuestions = generateLevelQuestions(level);
  qIndex = 0;
  loadQuestion();
}

function loadQuestion(){
  let q = levelQuestions[qIndex];
  document.getElementById("level").innerText = "Level " + level;
  document.getElementById("question").innerText = q.q;

  for(let i=0;i<4;i++){
    document.getElementById("o"+i).innerText = q.o[i];
  }

  document.getElementById("feedback").innerText = "";
  document.getElementById("progress").innerText =
    "Question " + (qIndex+1) + " / 10";
}

function check(sel){
  let f = document.getElementById("feedback");
  if(sel === levelQuestions[qIndex].a){
    f.innerHTML = "âœ… Correct";
  } else {
    f.innerHTML = "âŒ Wrong! Correct: <b>" +
      levelQuestions[qIndex].o[levelQuestions[qIndex].a] + "</b>";
  }

  qIndex++;

  setTimeout(()=>{
    if(qIndex < Q_PER_LEVEL){
      loadQuestion();
    } else {
      if(level < TOTAL_LEVELS){
        level++;
        loadLevel();
      } else {
        document.querySelector(".quiz-box").innerHTML =
          "<h2>ðŸŽ‰ Game Completed</h2>";
      }
    }
  },1000);
}

loadLevel();
</script>

</body>
</html>
